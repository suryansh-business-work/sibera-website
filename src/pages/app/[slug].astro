---
import Page from "../../layouts/Page.astro";
import ThemeWrapper from "../../components/ThemeWrapper.astro";
import ProductBanner from "../../components/banners/ProductBanner.astro";
import Features from "../../components/product/Features.astro";
import Pricing from "../../components/product/Pricing.astro";
import FAQ from "../../components/product/FAQ.astro";
import { allApps } from "../../data/apps-data";
import { getThemeByCategory } from "../../data/app-themes";

export const prerender = true;

export async function getStaticPaths() {
  return allApps.map((app) => ({
    params: {
      slug: app.appSlug || app.appName.toLowerCase().replace(/\s+/g, "-"),
    },
    props: { app },
  }));
}

const { app } = Astro.props;

if (!app) {
  return Astro.redirect("/404");
}

const theme = getThemeByCategory(app.appCategory);
const productHeader = {
  name: app.appName,
  themeColor: theme.primaryColor,
};

// Mock Data (In a real app, this would come from a database or CMS based on the app ID)
const features = [
  {
    title: "Seamless Integration",
    description: "Works perfectly with the entire Sibera ecosystem.",
    icon: "fa-solid fa-link",
  },
  {
    title: "Advanced Analytics",
    description: "Gain deep insights with our powerful reporting tools.",
    icon: "fa-solid fa-chart-line",
  },
  {
    title: "Secure Infrastructure",
    description: "Enterprise-grade security to keep your data safe.",
    icon: "fa-solid fa-shield-halved",
  },
  {
    title: "24/7 Support",
    description: "Our dedicated team is always here to help you.",
    icon: "fa-solid fa-headset",
  },
  {
    title: "Mobile Ready",
    description: "Access your data from anywhere, on any device.",
    icon: "fa-solid fa-mobile-screen",
  },
  {
    title: "Automated Workflows",
    description: "Save time by automating repetitive tasks.",
    icon: "fa-solid fa-robot",
  },
];

const plans = [
  {
    name: "Starter",
    price: "$0",
    period: "/mo",
    features: ["Basic Features", "1 User", "Community Support"],
    recommended: false,
  },
  {
    name: "Pro",
    price: "$29",
    period: "/mo",
    features: [
      "All Basic Features",
      "5 Users",
      "Priority Support",
      "Advanced Analytics",
    ],
    recommended: true,
  },
  {
    name: "Enterprise",
    price: "Custom",
    period: "",
    features: [
      "Unlimited Users",
      "Dedicated Account Manager",
      "Custom Integrations",
      "SLA",
    ],
    recommended: false,
  },
];

const faqs = [
  {
    question: "Is there a free trial?",
    answer: "Yes, we offer a 14-day free trial on all paid plans.",
  },
  {
    question: "Can I cancel anytime?",
    answer:
      "Absolutely. You can cancel your subscription at any time without penalty.",
  },
  {
    question: "Do you offer discounts for non-profits?",
    answer: "Yes, please contact our sales team for more information.",
  },
];
---

<Page
  title={`${app.appName} | Sibera`}
  description={app.appDescription}
  productHeader={productHeader}
>
  <ThemeWrapper category={app.appCategory}>
    <main>
      <ProductBanner
        appName={app.appName}
        appDescription={app.appDescription}
        appLogo={app.appLogo}
        bannerImage={app.bannerImage}
        appCategory={app.appCategory}
      />
      <Features features={features} />
      <Pricing plans={plans} />
      <FAQ faqs={faqs} />
    </main>
  </ThemeWrapper>
</Page>
